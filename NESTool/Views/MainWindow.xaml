<Window x:Class="NESTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:NESTool.ViewModels"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        mc:Ignorable="d"
        Height="617.748" Width="939.57" 
		x:Name="MainWindowView"
		Title="{Binding Title}"
		WindowStartupLocation="CenterScreen">
    <Window.DataContext >
        <vm:MainWindowViewModel />
    </Window.DataContext>
    <Window.InputBindings>
		<KeyBinding Key="S" Modifiers="Ctrl" Command="{Binding SaveCommand}" />
		<KeyBinding Key="S" Modifiers="Ctrl+Shift" Command="{Binding SaveAllCommand}" />
		<KeyBinding Key="N" Modifiers="Ctrl" Command="{Binding NewFileCommand}" />
		<KeyBinding Key="N" Modifiers="Ctrl+Shift" Command="{Binding NewProjectCommand}" CommandParameter="{Binding ElementName=MainWindowView}" />
		<KeyBinding Key="O" Modifiers="Ctrl" Command="{Binding OpenProjectCommand}" />
		<KeyBinding Key="B" Modifiers="Ctrl" Command="{Binding BuildProjectCommand}" />
	</Window.InputBindings>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadConfigsCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
	<DockPanel>
		<Menu DockPanel.Dock="Top">
			<MenuItem Header="_File">
				<MenuItem Header="_New">
					<MenuItem Header="New _Project" InputGestureText="Ctrl+Shift+N" 
							  Command="{Binding NewProjectCommand}" CommandParameter="{Binding ElementName=MainWindowView}" />
					<MenuItem Header="New _File" InputGestureText="Ctrl+N" Command="{Binding NewFileCommand}" />
				</MenuItem>
				<MenuItem Header="_Open">
					<MenuItem Header="Open _Project" Command="{Binding OpenProjectCommand}" InputGestureText="Ctrl+O"/>
				</MenuItem>
				<Separator />
				<MenuItem Header="Close _Project" Command="{Binding CloseProjectCommand}" />
				<Separator />
				<MenuItem Header="_Save" InputGestureText="Ctrl+S" Command="{Binding SaveCommand}"/>
				<MenuItem Header="Save _All" InputGestureText="Ctrl+Shift+S" Command="{Binding SaveAllCommand}"/>
				<Separator />
				<MenuItem Header="_Recent Projects" ItemsSource="{Binding RecentProjects}">
					<MenuItem.ItemContainerStyle>
						<Style TargetType="{x:Type MenuItem}">
							<Setter Property="Header" Value="{Binding DisplayName}"/>
							<Setter Property="Command" Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.OpenProjectCommand}" />
							<Setter Property="CommandParameter" Value="{Binding Path}" />
						</Style>
					</MenuItem.ItemContainerStyle>
				</MenuItem>
				<Separator />
				<MenuItem Header="_Exit" InputGestureText="Alt+F4"/>
			</MenuItem>
			<MenuItem Header="_Project">
				<MenuItem Header="_Build Project" InputGestureText="Ctrl+B" Command="{Binding BuildProjectCommand}" CommandParameter="{Binding ProjectName}"/>
				<Separator/>
				<MenuItem Header="Project _Properties..." Command="{Binding OpenProjectPropertiesCommand}" CommandParameter="{Binding ProjectName}"/>
			</MenuItem>
			<MenuItem Header="_Help">
				<MenuItem Header="_View Help" Command="{Binding ViewHelpCommand}" />
				<Separator />
				<MenuItem Header="_About" Command="{Binding ShowAboutDialogCommand}" CommandParameter="{Binding ElementName=MainWindowView}" />
			</MenuItem>
		</Menu>
		<ToolBarTray DockPanel.Dock="Top">
			<ToolBar x:Name="File">
				<Button Content="New" ToolTip="Hola 1" ToolBar.OverflowMode="AsNeeded">
				</Button>
				<Button Content="Save" ToolTip="Hola 2" ToolBar.OverflowMode="AsNeeded" Command="{Binding SaveCommand}">
				</Button>
				<Button Content="Save All" ToolTip="Hola 3" ToolBar.OverflowMode="AsNeeded" Command="{Binding SaveAllCommand}">
				</Button>
			</ToolBar>
		</ToolBarTray>
		<StatusBar DockPanel.Dock="Bottom">
			<StatusBarItem>
				<TextBlock>Gato</TextBlock>
			</StatusBarItem>
		</StatusBar>
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="3"/>
				<ColumnDefinition MinWidth="100" Width="200"/>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="3"/>
			</Grid.ColumnDefinitions>
			<TreeView Grid.Column="1" ItemsSource="{Binding ProjectItems}">
				<TreeView.ItemContainerStyle>
					<Style TargetType="{x:Type TreeViewItem}">
						<Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
						<Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
						<Setter Property="FontWeight" Value="Normal" />
						<Style.Triggers>
							<Trigger Property="IsSelected" Value="True">
								<Setter Property="FontWeight" Value="Bold" />
							</Trigger>
						</Style.Triggers>
					</Style>
				</TreeView.ItemContainerStyle>
				<TreeView.ItemTemplate>
					<HierarchicalDataTemplate>
						<Label Content="{Binding DisplayName}"/>
					</HierarchicalDataTemplate>
				</TreeView.ItemTemplate>
			</TreeView>
			<GridSplitter Grid.Column="1" Width="5" />
			<Frame Grid.Column="2" />
		</Grid>
	</DockPanel>
</Window>
